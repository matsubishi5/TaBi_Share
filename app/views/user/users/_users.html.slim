.row
  .col-xs-8
  .col-xs-4
    .row
      = form_with url: user_user_keyword_search_path, method: :get, local: true do
        .col-xs-9.keyword-search
          = text_field_tag :search, '', placeholder: "ユーザーキーワード検索", class: "form-control"
        .col-xs-3
          = submit_tag '検索', name: nil, class: "btn btn-info btn-block"
.row
  - users.each.with_index(1) do |user, index|
    .col-xs-4
      .ribbon-wrapper
        .thumbnail
          span.ribbon
            - case index when 1
              i.fas.fa-crown[style="color: gold;"]
            - when 2
              i.fas.fa-crown[style="color: silver;"]
            - when 3
              i.fas.fa-crown[style="color: #B08A1C;"]
            - else
              = index
          = link_to user_user_path(user) do
            = attachment_image_tag user, :profile_image, fallback: "no_image.png"
          .caption
            p
              - case user.rank when "レギュラー"
                span.label.label-default
                  = user.rank
              - when "シルバー"
                span.label.label-primary
                  = user.rank
              - when "ゴールド"
                span.label.label-warning
                  = user.rank
              - when "プラチナ"
                span.label.label-info
                  = user.rank
              - when "ダイヤモンド"
                span.label.label-danger
                  = user.rank
            p
              = user.name
              |  ( 
              = user.age
              | 歳 
              = user.sex
              |  ) 
            p
              = truncate(user.introduction, length: 20)
            p
              |  <span id="follower-link_
              = user.id
              | " role=" presentation"> 
              = link_to "#{user.followed.count}フォロワー", user_follower_path(user)
              |  <span id="followbutton_
              = user.id
              | " class="user__button"> 
              - unless user == current_user
                = render "user/users/followbutton", user: user
